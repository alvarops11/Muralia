<div class="modal-container">
    <div class="modal-header">
        <div style="display: flex; align-items: center; gap: 10px;">
            <span class="header-icon">ğŸ”</span>
            <h3>Buscar Post-it</h3>
        </div>
        <span class="close-modal-x" (click)="cerrar.emit()">Ã—</span>
    </div>

    <div class="modal-body">
        <div class="search-row">
            <div class="search-input-wrapper">
                <span class="search-icon">ğŸ”</span>
                <input type="text" [(ngModel)]="terminoBusqueda" class="search-input"
                    placeholder="Buscar por palabra clave o contenido...">
                <span *ngIf="terminoBusqueda" class="clear-search" (click)="terminoBusqueda = ''">Ã—</span>
            </div>
            <button class="btn-search-action">ğŸ”</button>
        </div>

        <div class="filters-row">
            <button class="filter-chip" [class.active]="filtroActual === 'Todos'"
                (click)="cambiarFiltro('Todos')">Todos</button>
            <button class="filter-chip" [class.active]="filtroActual === 'Con comentarios'"
                (click)="cambiarFiltro('Con comentarios')">Con Comentarios</button>
            <button class="filter-chip" [class.active]="filtroActual === 'Destacados'"
                (click)="cambiarFiltro('Destacados')">Destacados</button>
        </div>

        <div class="status-box success" *ngIf="terminoBusqueda">
            <span class="check-icon">âœ…</span>
            <span>Se encontraron <strong>{{ resultadosFiltrados.length }} resultados</strong> para "{{ terminoBusqueda
                }}"</span>
        </div>

        <div class="results-list"
            style="max-height: 400px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px;">
            <div *ngFor="let posit of resultadosFiltrados" class="result-card"
                [style.border-left]="'6px solid ' + posit.color">
                <div class="result-content">
                    <h4 class="result-title">{{ posit.titulo }}</h4>
                    <p class="result-desc">{{ posit.contenido | slice:0:100 }}{{ posit.contenido.length > 100 ? '...' :
                        '' }}</p>
                    <div class="result-meta" *ngIf="posit.comentarios?.length">
                        <span>ğŸ’¬ {{ posit.comentarios.length }} comentarios</span>
                    </div>
                </div>
                <button class="btn-ver" (click)="seleccionar(posit.posit_id)">Ver en Tablero</button>
            </div>

            <div *ngIf="resultadosFiltrados.length === 0" class="no-results"
                style="text-align: center; padding: 20px; color: #666;">
                No se han encontrado post-its que coincidan con la bÃºsqueda.
            </div>
        </div>
    </div>
</div>